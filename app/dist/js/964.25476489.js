"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[964],{9021:function(e,t,s){s.d(t,{A:function(){return v}});var o=s(6768),r=s(4232),a=s.p+"img/logo.2dc139a5.jpeg";const n={class:"navbar navbar-expand-lg navbar-light bg-light"},l={class:"container-fluid"},i={class:"navbar-brand d-flex align-items-center",href:"/"},c=(0,o.Lk)("img",{src:a,alt:"",width:"35",height:"35",class:"d-inline-block align-text-top mx-4"},null,-1),d={class:"mx-2 ps-md-2 border-start border-md border-gray text-danger"},u=(0,o.Fv)('<div class="d-flex"><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav me-auto px-8 mb-2 mb-lg-0"><li class="nav-item mx-2"><a class="nav-link active" aria-current="page" href="/">Home</a></li><li class="nav-item mx-2 ps-md-4 border-start border-md border-gray"><a class="nav-link" href="/requested_books/Requested">Requested Books</a></li><li class="nav-item mx-2 ps-md-4 border-start border-md border-gray"><a class="nav-link" href="/requested_books/Issued">My Books</a></li><li class="nav-item mx-2 ps-md-4 border-start border-md border-gray"><a class="nav-link" href="/history">History</a></li><li class="nav-item mx-2 ps-md-4 border-start border-md border-gray"><a class="nav-link" href="/logout">Logout</a></li></ul></div></div>',1);function m(e,t,s,a,m,b){return(0,o.uX)(),(0,o.CE)("nav",n,[(0,o.Lk)("div",l,[(0,o.Lk)("a",i,[c,(0,o.eW)(" Library Management System "),(0,o.Lk)("code",d,(0,r.v_)(m.username)+"'s "+(0,r.v_)(e.nav),1)]),u])])}s(5216);var b=s(782),k={name:"NavBar",data(){return{username:"default",navid:"1"}},methods:{},computed:{...(0,b.aH)(["userData","navData"])},created(){this.username=this.userData,this.nav=this.navData}},h=s(1241);const g=(0,h.A)(k,[["render",m]]);var v=g},5231:function(e,t,s){s.r(t),s.d(t,{default:function(){return S}});var o=s(6768),r=s(4232);const a={class:"book"},n=(0,o.Lk)("div",null,null,-1),l={class:"col-lg-10 offset-lg-1"},i=(0,o.Lk)("h3",{class:"mb-3 mt-4"},"Issued Books",-1),c=(0,o.Lk)("hr",{class:"my-7"},null,-1),d={class:"list-group list-group-lg list-group-flush-y list-group-flush-x mb-7"},u={class:"row align-items-center"},m={class:"col-4"},b=["href"],k=["src"],h={class:"col"},g={class:"mb-4 fs-sm fw-bold"},v=["href"],p=(0,o.Lk)("br",null,null,-1),_={class:"fs-sm text-muted"},f=(0,o.Lk)("br",null,null,-1),y=(0,o.Lk)("br",null,null,-1),L=(0,o.Lk)("br",null,null,-1),x={class:"col-4"},w=["onClick"],C=(0,o.Lk)("br",null,null,-1),B=(0,o.Lk)("button",{class:"btn btn-info mt-1",style:{"max-width":"210px","min-width":"150px"},hidden:""}," Edit Request ",-1);function q(e,t,s,q,E,I){const R=(0,o.g2)("NavBar");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",a,[(0,o.bF)(R,{msg:"Welcome to Your Vue.js App"})]),n,(0,o.Lk)("div",l,[i,c,(0,o.Lk)("ul",d,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(E.books.requested_books,(e=>((0,o.uX)(),(0,o.CE)("li",{class:"list-group-item my-2 rounded border",key:e[0].book_id},[(0,o.Lk)("div",u,[(0,o.Lk)("div",m,[(0,o.Lk)("a",{href:I.book_path(e[0].book_id)},[(0,o.Lk)("img",{src:I.fetchbookimg(e[0].book_id),alt:"...",class:"img-fluid",style:{width:"110px",height:"140px","border-radius":"0.5rem"}},null,8,k)],8,b)]),(0,o.Lk)("div",h,[(0,o.Lk)("p",g,[(0,o.Lk)("a",{class:"text-body",href:I.book_path(e[0].book_id)},(0,r.v_)(e[1].book_name)+": "+(0,r.v_)(e[1].title),9,v),p]),(0,o.Lk)("div",_,[(0,o.eW)(" Author: "+(0,r.v_)(e[1].author)+" ",1),f,(0,o.eW)(" Issue Date: "+(0,r.v_)(e[0].date_issue)+" ",1),y,(0,o.eW)(" Return Date: "+(0,r.v_)(e[0].return_date)+" ",1),L])]),(0,o.Lk)("div",x,[(0,o.Lk)("button",{class:"btn btn-warning mb-1",style:{"max-width":"210px","min-width":"150px"},onClick:t=>I.return_book(e[0].book_id)}," Return",8,w),C,B])])])))),128))]),(0,o.Lk)("button",{class:"btn w-100 btn-dark",onClick:t[0]||(t[0]=e=>I.return_all_books())},(0,r.v_)(E.button_message),1)])],64)}s(4114);var E=s(9021),I=s(4123),R={name:"RequestedBooksView",components:{NavBar:E.A},data(){return{books:[],currentDate:"",returnDate:"-----",refreshIntervalId:"",status:"Request for Book",button_message:"Return All Books"}},beforeCreate(){const e=localStorage.getItem("library_management_system_token");this.$store.commit("setNav","My Books"),fetch(I.H$+"/requested_books/Issued",{method:"GET",headers:{"Content-Type":"application/json","x-access-token":e}}).then((e=>e.json())).then((e=>{console.log(e),0===e.requested_books.length&&(this.button_message="No Books to Return"),this.$store.commit("setUser",e.current_user.username),this.$store.commit("setNav","My Books"),this.books=e;try{this.book_id_selected=this.books.requested_books[0][0].book_id}catch(t){console.log()}})).catch((e=>{console.error("Error:",e),this.$router.push("/signin")}))},methods:{fetchbookimg(e){return I.H$+"/fetchbookimg/"+e},book_path(e){return"/book/"+e},return_book(e){try{let t={book_id:e};const s=localStorage.getItem("library_management_system_token");fetch(I.H$+"/return_book",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":s},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{"success"!==e.status?alert(e.message):(alert(e.message),window.location.reload())})).catch((e=>{console.error("Error fetching data4:",e)}))}catch(t){console.error("Error fetching data5:",t)}},return_all_books(){try{const e=localStorage.getItem("library_management_system_token");fetch(I.H$+"/return_all_books",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":e}}).then((e=>e.json())).then((e=>{"success"!==e.status?alert(e.message):(alert(e.message),window.location.reload())})).catch((e=>{console.error("Error fetching data6:",e)}))}catch(e){console.error("Error fetching data7:",e)}}}},j=s(1241);const D=(0,j.A)(R,[["render",q]]);var S=D}}]);
//# sourceMappingURL=964.25476489.js.map