"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[393],{9021:function(e,t,s){s.d(t,{A:function(){return p}});var a=s(6768),o=s(4232),r=s.p+"img/logo.2dc139a5.jpeg";const l={class:"navbar navbar-expand-lg navbar-light bg-light"},n={class:"container-fluid"},i={class:"navbar-brand d-flex align-items-center",href:"/"},d=(0,a.Lk)("img",{src:r,alt:"",width:"35",height:"35",class:"d-inline-block align-text-top mx-4"},null,-1),c={class:"mx-2 ps-md-2 border-start border-md border-gray text-danger"},u=(0,a.Fv)('<div class="d-flex"><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav me-auto px-8 mb-2 mb-lg-0"><li class="nav-item mx-2"><a class="nav-link active" aria-current="page" href="/">Home</a></li><li class="nav-item mx-2 ps-md-4 border-start border-md border-gray"><a class="nav-link" href="/requested_books/Requested">Requested Books</a></li><li class="nav-item mx-2 ps-md-4 border-start border-md border-gray"><a class="nav-link" href="/requested_books/Issued">My Books</a></li><li class="nav-item mx-2 ps-md-4 border-start border-md border-gray"><a class="nav-link" href="/history">History</a></li><li class="nav-item mx-2 ps-md-4 border-start border-md border-gray"><a class="nav-link" href="/logout">Logout</a></li></ul></div></div>',1);function m(e,t,s,r,m,k){return(0,a.uX)(),(0,a.CE)("nav",l,[(0,a.Lk)("div",n,[(0,a.Lk)("a",i,[d,(0,a.eW)(" Library Management System "),(0,a.Lk)("code",c,(0,o.v_)(m.username)+"'s "+(0,o.v_)(e.nav),1)]),u])])}s(5216);var k=s(782),b={name:"NavBar",data(){return{username:"default",navid:"1"}},methods:{},computed:{...(0,k.aH)(["userData","navData"])},created(){this.username=this.userData,this.nav=this.navData}},h=s(1241);const g=(0,h.A)(b,[["render",m]]);var p=g},2352:function(e,t,s){s.r(t),s.d(t,{default:function(){return he}});var a=s(6768),o=s(4232);const r={class:"book"},l=(0,a.Lk)("div",null,null,-1),n={class:"col-lg-10 offset-lg-1"},i=(0,a.Lk)("h3",{class:"mb-3 mt-4"},"Requested Books",-1),d=(0,a.Lk)("hr",{class:"my-7"},null,-1),c={class:"list-group list-group-lg list-group-flush-y list-group-flush-x mb-7"},u={class:"row align-items-center"},m={class:"col-4"},k=["href"],b=["src"],h={class:"col"},g={class:"mb-4 fs-sm fw-bold"},p=["href"],v=(0,a.Lk)("br",null,null,-1),f={class:"fs-sm text-muted"},_=(0,a.Lk)("br",null,null,-1),L=(0,a.Lk)("br",null,null,-1),y=(0,a.Lk)("br",null,null,-1),x={class:"col-4"},w=["onClick"],q=(0,a.Lk)("br",null,null,-1),D=["data-bs-target","onClick"],C=["id"],I={class:"modal-dialog"},E={class:"modal-content"},B=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h4",{class:"modal-title"},"Request for Book"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1),R={class:"modal-body"},T={class:"list-group list-group-lg list-group-flush-y list-group-flush-x mb-7"},S={class:"list-group-item"},N={class:"row align-items-center"},j={class:"col-4"},A=["href"],$=["src"],H={class:"col"},W={class:"fs-sm fw-bold"},O=["href"],P={class:"fs-sm text-muted"},F=(0,a.Lk)("br",null,null,-1),M=(0,a.Lk)("hr",null,null,-1),V={class:"card mb-9 bg-light"},X={class:"card-body"},J={class:"list-group list-group-sm list-group-flush-y list-group-flush-x"},K={class:"list-group-item d-flex"},U=(0,a.Lk)("span",null,"Current Date/Time",-1),G={class:"ms-auto fs-sm",id:"date"},Y={class:"list-group-item d-flex"},z=(0,a.Lk)("div",{class:"d-flex justify-content-center align-items-center"},[(0,a.Lk)("span",null,"Period of Time")],-1),Q=["id"],Z=["id"],ee=(0,a.Lk)("option",{selected:"",value:"hrs"},"hrs",-1),te=(0,a.Lk)("option",{value:"days"},"days",-1),se=(0,a.Lk)("option",{value:"weeks"},"weeks",-1),ae=[ee,te,se],oe={class:"list-group-item d-flex"},re=(0,a.Lk)("span",null,"Return Date/Time",-1),le={class:"ms-auto fs-sm",id:"datereturn"},ne=(0,a.Lk)("p",{class:"mb-7 fs-xs text-gray-500 mt-2"}," After the Return of Date/Time, the book will be automatically returned or the access to user will be revoked. ",-1),ie=["disabled","onClick"];function de(e,t,s,ee,te,se){const de=(0,a.g2)("NavBar");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",r,[(0,a.bF)(de,{msg:"Welcome to Your Vue.js App"})]),l,(0,a.Lk)("div",n,[i,d,(0,a.Lk)("ul",c,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(te.books.requested_books,(e=>((0,a.uX)(),(0,a.CE)("li",{class:"list-group-item my-2 rounded border",key:e[0].book_id},[(0,a.Lk)("div",u,[(0,a.Lk)("div",m,[(0,a.Lk)("a",{href:se.book_path(e[0].book_id)},[(0,a.Lk)("img",{src:se.fetchbookimg(e[0].book_id),alt:"...",class:"img-fluid",style:{width:"110px",height:"140px","border-radius":"0.5rem"}},null,8,b)],8,k)]),(0,a.Lk)("div",h,[(0,a.Lk)("p",g,[(0,a.Lk)("a",{class:"text-body",href:se.book_path(e[0].book_id)},(0,o.v_)(e[1].book_name)+": "+(0,o.v_)(e[1].title),9,p),v]),(0,a.Lk)("div",f,[(0,a.eW)(" Author: "+(0,o.v_)(e[1].author)+" ",1),_,(0,a.eW)(" Issue Date: "+(0,o.v_)(e[0].date_issue)+" ",1),L,(0,a.eW)(" Return Date: "+(0,o.v_)(e[0].return_date)+" ",1),y])]),(0,a.Lk)("div",x,[(0,a.Lk)("button",{class:"btn btn-danger mb-1",style:{"max-width":"210px","min-width":"150px"},onClick:t=>se.cancel_request(e[0].book_id)}," Cancel Request",8,w),q,(0,a.Lk)("button",{class:"btn btn-info mt-1",style:{"max-width":"210px","min-width":"150px"},"data-bs-toggle":"modal","data-bs-target":"#myModal"+e[0].book_id,onClick:t=>te.book_id_selected=e[0].book_id}," Edit Request ",8,D),(0,a.Lk)("div",{class:"modal",id:"myModal"+e[0].book_id},[(0,a.Lk)("div",I,[(0,a.Lk)("div",E,[B,(0,a.Lk)("div",R,[(0,a.Lk)("div",null,[(0,a.Lk)("ul",T,[(0,a.Lk)("li",S,[(0,a.Lk)("div",N,[(0,a.Lk)("div",j,[(0,a.Lk)("a",{href:se.book_path(e[0].book_id)},[(0,a.Lk)("img",{src:se.fetchbookimg(e[0].book_id),class:"mx-2",style:{width:"90px",height:"110px"},alt:"..."},null,8,$)],8,A)]),(0,a.Lk)("div",H,[(0,a.Lk)("p",W,[(0,a.Lk)("a",{class:"text-body",href:se.book_path(e[0].book_id)},(0,o.v_)(e[1].book_name)+" : "+(0,o.v_)(e[1].title),9,O)]),(0,a.Lk)("div",P,[(0,a.eW)(" Author: "+(0,o.v_)(e[1].author)+" ",1),F,(0,a.eW)(" Pages: 1000 ")])])])]),M]),(0,a.Lk)("div",V,[(0,a.Lk)("div",X,[(0,a.Lk)("ul",J,[(0,a.Lk)("li",K,[U,(0,a.Lk)("span",G,(0,o.v_)(te.currentDate),1)]),(0,a.Lk)("li",Y,[z,(0,a.Lk)("input",{type:"number",class:"ms-auto fs-sm mx-2 form-control form-control-sm",style:{width:"60px"},id:"timeperiod"+e[0].book_id,required:""},null,8,Q),(0,a.Lk)("select",{class:"form-control form-control-sm",id:"unitselection"+e[0].book_id,style:{width:"60px"},required:""},ae,8,Z)]),(0,a.Lk)("li",oe,[re,(0,a.Lk)("span",le,(0,o.v_)(te.returnDate),1)])])])]),ne,(0,a.Lk)("button",{disabled:!se.isDateValid,class:"btn w-100 btn-dark",onClick:t=>se.request(e[0].book_id)}," Edit Book Request ",8,ie)])])])])],8,C)])])])))),128))]),(0,a.Lk)("button",{class:"btn w-100 btn-dark",onClick:t[0]||(t[0]=e=>se.cancel_all_requests())},(0,o.v_)(te.button_message),1)])],64)}s(4114);var ce=s(9021),ue=s(4123),me={name:"RequestedBooksView",components:{NavBar:ce.A},data(){return{books:[],currentDate:"",returnDate:"-----",refreshIntervalId:"",status:"Request for Book",book_id_selected:"",button_message:"Cancel All Request"}},mounted(){try{this.updateDate(),this.updatereturnDate(),setInterval(this.updateDate,1e3),this.refreshIntervalId=setInterval(this.updatereturnDate,1e3)}catch(e){console.error("ss")}},beforeCreate(){const e=localStorage.getItem("library_management_system_token");this.$store.commit("setNav","Requested Books"),fetch(ue.H$+"/requested_books/Requested",{method:"GET",headers:{"Content-Type":"application/json","x-access-token":e}}).then((e=>e.json())).then((e=>{console.log(e),0===e.requested_books.length&&(this.button_message="No Requested Books"),this.$store.commit("setUser",e.current_user.username),this.$store.commit("setNav","Requested Books"),this.books=e;try{this.book_id_selected=this.books.requested_books[0][0].book_id}catch(t){console.log()}})).catch((e=>{console.error("Error:",e),this.$router.push("/signin")}))},methods:{fetchbookimg(e){return ue.H$+"/fetchbookimg/"+e},book_path(e){return"/book/"+e},date(){return(new Date).toLocaleString()},updateDate(){let e=(new Date).getTime();this.currentDate=new Date(e).toLocaleString()},updatereturnDate(e=this.book_id_selected){try{if(0===this.books.requested_books.length)return;console.log("book_id",e);let t=(new Date).getTime(),s=document.getElementById("timeperiod"+e).value,a=document.getElementById("unitselection"+e).value;if(""===s||""===a)return void(this.returnDate="-----");let o=parseInt(s);if(isNaN(o))return void(this.returnDate="-----");o="hrs"===a?60*o*60*1e3:"days"===a?24*o*60*60*1e3:"weeks"===a?7*o*24*60*60*1e3:0;let r=new Date(t).getTime()+o;this.returnDate=new Date(r).toLocaleString()}catch(t){}},request(e){try{let t=document.getElementById("timeperiod"+e).value,s=document.getElementById("unitselection"+e).value,a={book_id:e,period:t,unit:s};const o=localStorage.getItem("library_management_system_token");fetch(ue.H$+"/request_book",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":o},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{"success"!==e.status?alert(e.message):(alert(e.message),window.location.reload())})).catch((e=>{console.error("Error fetching data2:",e)}))}catch(t){console.error("Error fetching data3:",t)}},cancel_request(e){try{let t={book_id:e};const s=localStorage.getItem("library_management_system_token");fetch(ue.H$+"/cancel_request",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":s},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{"success"!==e.status?alert(e.message):(alert(e.message),window.location.reload())})).catch((e=>{console.error("Error fetching data4:",e)}))}catch(t){console.error("Error fetching data5:",t)}},cancel_all_requests(){try{const e=localStorage.getItem("library_management_system_token");fetch(ue.H$+"/cancel_all_requests",{method:"POST",headers:{"Content-Type":"application/json","x-access-token":e}}).then((e=>e.json())).then((e=>{"success"!==e.status?alert(e.message):(alert(e.message),window.location.reload())})).catch((e=>{console.error("Error fetching data6:",e)}))}catch(e){console.error("Error fetching data7:",e)}}},computed:{isDateValid(){let e=this.returnDate,t=parseInt(e);return!isNaN(t)}},beforeUnmount(){try{clearInterval(this.refreshIntervalId)}catch(e){console.error("Error fetching dasta:",e)}}},ke=s(1241);const be=(0,ke.A)(me,[["render",de]]);var he=be}}]);
//# sourceMappingURL=393.5485848d.js.map