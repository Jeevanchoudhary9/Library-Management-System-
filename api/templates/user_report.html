<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Summary View</title>
    <!-- Include Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    {{data}}
    <div>
        <div class="row">
            <canvas
                id="bookIssuanceChart"
                width="800"
                height="400"
                style="max-height: 600px; max-width: 600px; margin: 50px"
            ></canvas>
            <canvas
                id="SectionIssuanceChart"
                width="800"
                height="400"
                style="max-height: 600px; max-width: 600px; margin: 50px"
            ></canvas>
            <canvas
                id="statusIssuanceChart"
                width="800"
                height="400"
                style="max-height: 600px; max-width: 600px; margin: 50px"
            ></canvas>
        </div>
    </div>

    <script>

        window.addEventListener('DOMContentLoaded', (event) => {
            // Fetch data from the server using AJAX or fetch API
            // For demonstration purposes, let's assume data is already available
            const data = {'books': ['demo', 'Edge of Physics', 'chemistry', 'maths', 'biology', 'zoology', 'botney', 'inorganic chemistry part2', 'Concept of Physics'], 'books_count': [4, 5, 9, 5, 2, 2, 3, 4, 1], 'status': 'success', 'current_user': {'id': 9, 'username': 'jeevan2421', 'profile_id': 9, 'role': 'user'}, 'sections_count': [24, 7, 4], 'sections_name': ['JEE Mains', 'NEET', 'Chemistry'], 'status_name': ['Returned', 'Overdue', 'Rejected', 'Revoked'], 'status_count': [8, 18, 3, 6]} ;
            // Call the renderCharts function with the data
            console.log("sss");
            var ctxBook = document.getElementById('bookIssuanceChart').getContext('2d');
            var bookChart = new Chart(ctxBook, {
                type: 'bar',
                data: {
                    labels: data.books,
                    datasets: [{
                        label: 'Number of Issuances',
                        data: data.books_count,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Issuances'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Book Name'
                            }
                        }
                    }
                }
            });

            var ctxSection = document.getElementById('SectionIssuanceChart').getContext('2d');
            var sectionChart = new Chart(ctxSection, {
                type: 'pie',
                data: {
                    labels: data.sections_name,
                    datasets: [{
                        label: 'Number of Issuances',
                        data: data.sections_count,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Issuances'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Section Name'
                            }
                        }
                    }
                }
            });

            var ctxStatus = document.getElementById('statusIssuanceChart').getContext('2d');
            var statusChart = new Chart(ctxStatus, {
                type: 'line',
                data: {
                    labels: data.status_name,
                    datasets: [{
                        label: 'Number of Issuances',
                        data: data.status_count,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Issuances'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Status'
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
